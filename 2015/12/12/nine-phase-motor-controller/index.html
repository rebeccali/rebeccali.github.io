<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
	<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>

Nine Phase Motor Controller • REBECCA LI

</title>
<meta name="description" content=" Rebecca Li is an undergraduate in Mechanical Engineering and Robotics at MIT.">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed.xml">

<!-- icons -->
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">

<meta name="theme-color" content="#1C3848">
<meta name="msapplication-TileColor" content="#1C3848">
<meta name="msapplication-TileImage" content="/mstile-310x310.png">
<!-- /icons -->

<!-- og tags -->
<meta property="og:site_name" content="REBECCA LI">
<meta property="og:title" content="Nine Phase Motor Controller • REBECCA LI">
<meta property="og:locale" content="en">

  
    <meta property="og:image" content="http://rebecca.li//img/l3lb2.png">
  

<meta property="og:type" content="website">
<meta property="og:url" content="http://rebecca.li//2015/12/12/nine-phase-motor-controller/">
<meta property="og:description" content="

Rebecca Li is an undergraduate in Mechanical Engineering and Robotics at MIT.
">
<!-- /og tags -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="/js/jquery.mousewheel-3.0.6.pack.js"></script>
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<script src="/js/jquery.fancybox.pack.js"></script>
<link rel="stylesheet" href="/js/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
<script type="text/javascript" src="/js/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="/js/helpers/jquery.fancybox-media.js?v=1.0.6"></script>

<link rel="stylesheet" href="/js/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
<script type="text/javascript" src="/js/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>

<script src="/js/modernizr.js"></script>
<script src="/js/fitvids.js"></script>
<script src="/js/snake.js"></script>


<link href='//fonts.googleapis.com/css?family=Source+Code+Pro:400,700|Source+Sans+Pro:600,900|Crimson+Text:700italic,600,600italic,400,700,400italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/reset.css">
<link rel="stylesheet" href="/css/pygments.css">

<link rel="stylesheet" href="/css/style.css">
<link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Play' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Alegreya' rel='stylesheet' type='text/css'>
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]-->


<style>
header {
  margin-bottom: 40px;
}
@media all and (min-width: 500px) {
  header {
    margin-bottom: 100px;
  }
}
header::after {
  display: none;
}
</style>


	
</head>
<body>
	<canvas class="snake" id="stage" height="400" width="520" style="display:none;"></canvas>
	
	<div class="cover-image-container">
		<img alt="Cover image" src="/img/covers/l3lb2.png">
	</div>
	
	<div class="wrap" id="wrap1">
		<header>
  <a href="/" class="website-title">
    
      REBECCA LI
    

  </a>
  <nav>
  <a href="/about/">About</a>
  <a href="/archive/">Blog</a>
  <a href="/projects/">Projects</a>
</nav>

  
  <link href="https://fonts.googleapis.com/css?family=Montserrat+Subrayada|Nunito|Rock+Salt" rel="stylesheet">
</header>

		

  


<article>
  <span class="meta">Dec 12, 2015 • 2&nbsp;min read</span>
	<h1>Nine Phase Motor Controller</h1>
		<p>Over the summer, I had the privilege of participating in the <a href="http://www.powerracingseries.org/">PowerWheels Racing Series</a>. Think back to the little toy cars 5 year olds rode in made of plastic and hot rod dreams. </p>

<p><img src="/img/powerbarbie.jpg" alt="picture of car here" /> <small>Barbie has more horsepower than you</small></p>

<p>The PowerWheels series consists of racing go-karts made out of these Fisher Price Power Wheels, for under $500. Recently, it graduated to turning the kid cars into <em>autonomous go-karts</em>, with a steering linkage driven by a servo and a very-not-cheap LIDAR camera. Not surprisingly, it is difficult to find a high current servo controller that isn’t terribly expensive. In addition to the servo, one also needs drive motors, throttle, etc which can builds up to a fair amount of electronics. All together, a go-kart driven off of brushless motors and a DC servo has 3 separate motor controllers, with a total of 8 half bridges.</p>

<p>This year, I had the following idea: What if you just had one board, with all of your power electronics, on <em>one board</em>? And Nine Phase was born.</p>

<h2 id="the-controller">The Controller</h2>
<p>Nine Phase is three three phase motor controllers, to control 3 brushless motors, with the ability to convert and of the individual controllers into an H bridge configurations. (Credits to <a href="http://isopack.blogspot.com">Bayley Wang</a> for his extensive help in this endevour). Of course, you could also go and use all of the phases together to make a <em>nine phase controller</em>, hence the name. Its uses could be autonomous gokart, 3 omniwheel drive robot, battlebot with two drive motors and weapon motor, etc. </p>

<h3 id="important-parts-list">Important Parts List:</h3>
<ul>
  <li><a href="http://www.ti.com/product/drv8302">DVR8302</a> - Gate Driver</li>
  <li>Arduino Pro Mini - Logic </li>
  <li>PSMN7R0-100PS 100V 100A 6.8 mOhm MOSFET</li>
</ul>

<p>The <a href="http://www.ti.com/product/drv8302">DVR8302</a> is a beautiful chip. It features a current sense amplifier, automatic overcurrent shutoff, a buck converter (on a completely separate die within the chip!) and low side PWM generation. <br />
Because it’s so complex, was a pain to work with. It’s difficult to debug, hard to solder correctly without a microscope, and sometimes just exhibits off behavior due to current protection. It’s worth the extra hassle in having a compact driver and the possibility of a fairly advanced controller.</p>

<p>In later revisions, the controller will implement current sensing as well as proper overcurrent protection. For version one however, the goal was simply three turning motors. </p>

<p><img src="/img/ninephasev1.png" alt="picture of board layout" /> <small>Version 1 Layout, with the drain and source switched on the MOSFETs.</small>
<img src="/img/l3lb1.png" alt="picture of board" /> <small>Version 1 board</small></p>

<p>The first version worked with only two hand-soldered wires, working up to ~30V. Above 30V, the motor controller would explode from bus rail noise. But, it turned brushless motors as well as doing position control on a gearmotor. That means it works, right?</p>

<h3 id="future-revisions">Future Revisions</h3>
<ul>
  <li>Switch D and S on MOSFETs</li>
  <li>Move Throttle pins to Analog Inputs</li>
  <li>Current sense in code</li>
  <li>CW rotation support</li>
  <li>Better wire layout</li>
</ul>

<p>You can find the Eagle files and Arduino code on my <a href="https://github.com/rebeccali/ninephase">Github</a>. Protected under MIT License. </p>


  
</article>


<div class="pagination clearfix">
  <div class="left">
    
      <a href="/2015/12/14/frozen-chainsaw-massacre/">‹ Next post</a>
    
  </div>
  <div class="right">
    
      <a href="/2015/12/11/new-website/">Previous post ›</a>
    
  </div>
</div>



<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = '//rebeccali.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


	  <script>
	    $("article").fitVids();
	    $('article p').each(function(i){
				if (($(this).find('img').length) && (!$.trim($(this).text()).length))  {
					$(this).addClass('img-only');
				}
				if ($.trim($(this).text()).length - $.trim($(this).find('small').text()).length == 0 && ($(this).find('img').length)){
					$(this).addClass('img-only-source');
				}
	  	});
	  </script>
	</div>
	<footer>
  <div class="inner">
    <p class="p-footer">This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.<br><a href="http://steinvc.github.io/holo-alfa/">Holo Alfa</a> Jekyll theme crafted by <a href="http://steinvc.github.io/holo-alfa/">Stijn</a>.</p>
  </div>
</footer>

</body>
</html>
